name: client

servers:
  - name: server
    url: ws://client:token@localhost:8086/test
    
components:
  - name: client/tcp
    type: tcp
    listen: 1080
    pass: client/socks5

    # debug: true
  - name: client/socks5
    type: socks5
    pass: client/router
    users: []
    # debug: true

  - name: client/router
    type: router
    passes:
      - type: ip
        cond: 192.168.31.0/255.255.255.0
        pass: server/free
      - type: strict
        cond: 1.1.1.1
        pass: client/deny
      - type: reg
        cond: "^.*.baidu.com$"
        pass: server/baidu
      - type: eval
        cond: source.host == dest.host
        pass: client/deny
    default: server/free

  - name: server/free
    type: free
    debug: true

  - name: server/baidu
    type: hole
    debug: true

  - name: client/deny
    type: hole
    debug: true
    timeout: 1000